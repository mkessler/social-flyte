<div class="row">
  <div class="col-lg-5 mb-2">
    <ul class="nav nav-tabs tabs-1 primary-color" role="tablist">
      <li class="nav-item">
        <%= link_to '#post-embed', class: 'nav-link active', role: 'tab', data: { toggle: 'tab' } do %>
          <i class="fa fa-sticky-note" aria-hidden="true"></i> Post
        <% end %>
      </li>
    </ul>
    <div class="tab-content card">
      <div class="tab-pane fade in active text-xs-center" id="post-embed" role="tabpanel">
        <div class="fb-post" data-href="https://www.facebook.com/<%= post.network_parent_id %>/posts/<%= post.network_post_id %>/" data-width="auto" data-show-text="true"></div>
      </div>
    </div>
  </div>

  <div class="col-lg-7 mb-2">
    <ul class="nav nav-tabs tabs-1 primary-color" role="tablist">
      <li class="nav-item">
        <%= link_to '#post-flagged-interactions', class: 'nav-link active', role: 'tab', data: { toggle: 'tab' } do %>
          <i class="fa fa-flag" aria-hidden="true"></i> Flagged
        <% end %>
      </li>
    </ul>
    <div class="tab-content card">
      <div class="tab-pane fade in active" id="post-flagged-interactions" role="tabpanel">
        <%= render "shared/flagged_interactions_datatable", organization: @organization, campaign: @campaign, post: @post, flagged_interactions: post.flagged_interactions, data_source: organization_campaign_post_interactions_url(organization, campaign, post, format: :json) %>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-lg-12 mb-2">
    <ul class="nav nav-tabs tabs-2 primary-color" role="tablist">
      <li class="nav-item">
        <a class="nav-link active" data-toggle="tab" href="#post-comments" role="tab"><i class="fa fa-comments" aria-hidden="true"></i> Comments</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" data-toggle="tab" href="#post-reactions" role="tab"><i class="fa fa-thumbs-up" aria-hidden="true"></i> Reactions</a>
      </li>
    </ul>

    <div class="tab-content card">
      <div class="tab-pane fade in active" id="post-comments" role="tabpanel">
        <%= render "comments/datatable", organization: organization, campaign: campaign, post: post %>
      </div>
      <div class="tab-pane fade in" id="post-reactions" role="tabpanel">
        <%= render "reactions/datatable", organization: organization, campaign: campaign, post: post %>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">
  $(document).on('ready', function() {
    window.fbAsyncInit = function() {
      App.facebook.init(<%= Rails.application.secrets.facebook_app_id %>);
      <% if current_user.facebook_token.nil? or current_user.facebook_token.expired? %>
        App.facebook.status();
      <% end %>
    }
    App.facebook.loadSDK();
    console.log('Facebook Authentication ready.');
  });
</script>
